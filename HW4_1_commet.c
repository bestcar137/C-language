// 표준 입출력 함수들을 사용하기 위해 stdio.h 헤더 포함
#include <stdio.h>

// 스택의 최대 크기를 정의 (고정 배열 사용 시 반드시 필요)
#define MAX_SIZE 100

// ======================================================
// 📦 Stack 구조체 정의: 스택의 핵심 정보들 포함
// ======================================================
typedef struct {
    int arr[MAX_SIZE]; // 스택 데이터를 저장할 배열
    int top;           // 스택의 top 위치를 나타내는 인덱스 (초기값: -1)
} Stack;

// ======================================================
// 🔧 스택 초기화 함수
// 스택을 사용하기 전에 반드시 호출해야 하며,
// top 값을 -1로 설정해 스택이 비어있음을 명시함
// ======================================================
void initialize(Stack *s) {
    s->top = -1;
}

// ======================================================
// 📌 스택이 가득 찼는지 확인하는 함수
// top이 MAX_SIZE - 1일 경우 더 이상 push 불가
// ======================================================
int isFull(Stack *s) {
    return s->top == MAX_SIZE - 1;
}

// ======================================================
// 📌 스택이 비어 있는지 확인하는 함수
// top이 -1이면 아무것도 없는 상태
// ======================================================
int isEmpty(Stack *s) {
    return s->top == -1;
}

// ======================================================
// 🟢 push 함수: 스택에 데이터를 추가하는 함수
// 스택이 가득 차지 않았다면 top을 증가시킨 뒤 해당 위치에 데이터 저장
// ======================================================
void push(Stack *s, int data) {
    if (isFull(s)) {
        // 가득 찬 경우 에러 메시지 출력 후 종료
        printf("Stack is full. Cannot push %d\n", data);
        return;
    }

    // top을 먼저 증가시키고 그 위치에 값을 저장
    s->arr[++(s->top)] = data;
}

// ======================================================
// 🔴 pop 함수: 스택에서 데이터를 꺼내는 함수 (삭제 + 반환)
// 스택이 비어있으면 에러 메시지 출력, 그렇지 않으면 top 위치 값을 반환
// ======================================================
int pop(Stack *s) {
    if (isEmpty(s)) {
        printf("Stack is empty. Cannot pop.\n");
        return -1; // 오류 시 -1 반환 (응용 시 주의)
    }

    return s->arr[(s->top)--]; // top 위치 값 반환 후 top 감소
}

// ======================================================
// 👁 peek 함수: 스택의 맨 위(top)에 있는 값을 반환 (삭제하지 않음)
// ======================================================
int peek(Stack *s) {
    if (isEmpty(s)) {
        printf("Stack is empty. Cannot peek.\n");
        return -1;
    }

    return s->arr[s->top]; // top 위치의 값만 반환
}

// ======================================================
// 🚀 main 함수: 프로그램 실행 시작점
// 문제에서 제시한 실행 예시 흐름을 코드로 구현
// ======================================================
int main() {
    Stack s;             // Stack 변수 선언
    initialize(&s);      // 스택 초기화: top = -1

    printf("Stack is empty.\n"); // 첫 상태 출력

    push(&s, 5);                 // 스택에 5 추가
    printf("Pushing: 5\n");

    push(&s, 10);                // 스택에 10 추가
    printf("Pushing: 10\n");

    // 현재 top 값을 확인 (10)
    printf("Peek: %d\n", peek(&s));

    // top 값 꺼내고 출력 (10이 나옴)
    printf("Popping: %d\n", pop(&s));

    // 다시 peek (5가 나옴)
    printf("Peek: %d\n", peek(&s));

    return 0;
}

/*
====================================================================
🧭 실행 결과 흐름 (예시 출력)
====================================================================

Stack is empty.
Pushing: 5
Pushing: 10
Peek: 10
Popping: 10
Peek: 5

====================================================================
🧠 이 코드로 배우는 C 개념 요약
====================================================================

✔ 구조체 정의와 사용
✔ 배열 기반 스택 구현 방식
✔ push/pop/peek의 작동 원리
✔ 포인터 사용 (Stack *s)
✔ 함수 분할 설계와 책임 분리
✔ LIFO 구조 이해 (후입선출)
✔ top 증가/감소 위치의 차이점 주의
✔ 에러 처리 기본 흐름

====================================================================
*/
